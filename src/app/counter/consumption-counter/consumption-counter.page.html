<ion-header *ngIf="imageStopped">
  <ion-toolbar color="dark">
    <ion-title class="ion-text-center">
      <img src="/assets/images/logo helios blanc 2.png" alt="">
    </ion-title>
  </ion-toolbar>
</ion-header> 

<ion-content>   
  <div class="cameraPreview" id="cameraPreview" *ngIf="cameraActive && !imageStopped">
    <div *ngIf="cameraActive">
      <div class="overlay" style="background: transparent !important;">
      </div>
      <ion-button (click)="stopCamera()" expand="block" id="close">
        <ion-icon name="close-circle" slot="icon-only"></ion-icon>
      </ion-button>
      <ion-button (click)="captureImage()" expand="block" id="capture">
        <ion-icon name="camera" slot="icon-only"></ion-icon>
      </ion-button>
      <div *ngIf="!cameraActive" class="main">  
        <img [src]="croppedImage" *ngIf="!cameraActive"/>
          <ion-button  expand="block" shape="round" size="medium" (click)="recognizeCropped()">Traduire l'image</ion-button>
          <div class="container">
            <form action="">
              <div class="container-form">
                <input type="tel" inputmode="numeric" class="num" id="code1" [(ngModel)]="index[0]" maxlength="1" (ngModelChange)="addNumValue($event, 0)" (focus)="maFonction2(0)" (keyup)="maFonction(2)" required [ngModelOptions]="{standalone: true}">
                <input type="tel" inputmode="numeric" class="num" id="code2" [(ngModel)]="index[1]" maxlength="1" (ngModelChange)="addNumValue($event, 1)" (focus)="maFonction2(1)" (keyup)="maFonction(3)" required [ngModelOptions]="{standalone: true}">
                <input type="tel" inputmode="numeric" class="num" id="code3" [(ngModel)]="index[2]" maxlength="1" (ngModelChange)="addNumValue($event, 2)" (focus)="maFonction2(2)" (keyup)="maFonction(4)" required [ngModelOptions]="{standalone: true}">
                <input type="tel" inputmode="numeric" class="num" id="code4" [(ngModel)]="index[3]" maxlength="1" (ngModelChange)="addNumValue($event, 3)" (focus)="maFonction2(3)" (keyup)="maFonction(5)" required [ngModelOptions]="{standalone: true}">
                <input type="tel" inputmode="numeric" class="num" id="code5" [(ngModel)]="index[4]" maxlength="1" (ngModelChange)="addNumValue($event, 4)" (focus)="maFonction2(4)" (keyup)="maFonction(6)" required [ngModelOptions]="{standalone: true}">
                <input type="tel" inputmode="numeric" class="num" id="code6" [(ngModel)]="index[5]" maxlength="1" (ngModelChange)="addNumValue($event, 5)" (focus)="maFonction2(5)" (keyup)="maFonction(7)" required [ngModelOptions]="{standalone: true}">
                <input type="tel" inputmode="numeric" class="num num2" id="code7" [(ngModel)]="index[6]" maxlength="1" (ngModelChange)="addNum2Value($event, 6)" (focus)="maFonction2(6)" (keyup)="maFonction(8)" required [ngModelOptions]="{standalone: true}">
                <input type="tel" inputmode="numeric" class="num num2" id="code8" [(ngModel)]="index[7]" maxlength="1" (ngModelChange)="addNum2Value($event, 7)" (focus)="maFonction2(7)" (keyup)="maFonction(9)" required [ngModelOptions]="{standalone: true}">
                <input type="tel" inputmode="numeric" class="num num2" id="code9" [(ngModel)]="index[8]" maxlength="1" (ngModelChange)="addNum2Value($event, 8)" (focus)="maFonction2(8)" required [ngModelOptions]="{standalone: true}">
              </div>  
            </form>
            <ion-button expand="block" shape="round" size="large" (click)="getJoinedValues()">Confirmer</ion-button> 
            <div>{{ joinedValues }}</div>  
          </div>
        </div>
    </div>
  </div>
  <!-- <img [src]="image" *ngIf="image && !cameraActive"/> -->
  <image-cropper class="cropper" style="background: transparent!important;" *ngIf="showCropper && !imageStopped" 
            [imageURL]="image"
            [autoCrop]=false
            [maintainAspectRatio]="false"
            format="png"
            [alignImage]="'left'"
            [cropper]="cropPosition"
            (imageCropped)="imageCropped($event)"
            (imageLoaded)="imageLoaded($event)"
            (cropperReady)="cropperReady()"
            (loadImageFailed)="loadImageFailed()">
  </image-cropper>
  <ion-button *ngIf="!cameraActive" expand="block" shape="round" size="medium" (click)="openCamera()">Prendre une photo</ion-button>
  <!--<ion-button expand="block" shape="round" size="medium" (click)="crop()">CROP THE PHOTO !!</ion-button>-->  
  <!-- <img [src]="croppedImage" /> -->
</ion-content>